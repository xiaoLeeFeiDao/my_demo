    {
        "version": "2.0.0",
        "tasks": [
            {
                "label": "Set Environment Variables",
                "type": "shell",
                "command": "${workspaceFolder}/.vscode/set_compile_env.bat",
                // "command": "${input:chooseScript}",
                // "command": "${workspaceFolder}/.vscode/set_compile_env.sh",
                "args": [
                    "${input:chooseEnv}"
                ],
                "options": {
                    "shell": {
                        "executable": "cmd.exe",
                        "args": [
                            "/c"
                        ]
                    }
                },
                "problemMatcher": [],
                "group": {
                    "kind": "build",
                    "isDefault": true
                }
            },
            {
                "label": "CMake Configure",
                "type": "shell",
                "command": "${env:cmake_path}",
                "args": [
                    "-DCMAKE_BUILD_TYPE=Debug",
                    "-DCMAKE_EXPORT_COMPILE_COMMANDS=TRUE",
                    "-DCMAKE_C_COMPILER=${env:C_COMPILER_FOR_TASK}",
                    "-DCMAKE_CXX_COMPILER=${env:CXX_COMPILER_FOR_TASK}",
                    "-S",
                    "${env:workspace_dir}",
                    "-B",
                    "${env:workspace_dir}/${env:build_dir_name}",
                    "-G",
                    "${env:cmakeGenerator}",
                ],
                "options": {
                    "shell": {
                        "executable": "${env:default_shell}",
                        "args": [
                            "${env:login_opt}"
                        ]
                    },
                },
                "problemMatcher": [
                    "$gcc"
                ],
                "group": "build"
            },
            {
                "label": "CMake Build",
                "type": "shell",
                "command": "${env:cmake_path}",
                "args": [
                    "--build",
                    "${env:workspace_dir}/${env:build_dir_name}"
                ],
                "group": "build",
                "dependsOn": "CMake Configure",
                "problemMatcher": [
                    "$gcc"
                ]
            },
            {
                "label": "Run Executable",
                "type": "shell",
                "command": "${env:workspace_dir}/bin/test${env:executableExtension}",
                "group": "build",
                "dependsOn": "CMake Build",
                "problemMatcher": []
            }
        ],
        "inputs": [
            {
                "id": "chooseScript",
                "type": "pickString",
                "description": "Select the environment script to run",
                "options": [
                    "${workspaceFolder}/.vscode/set_compile_env.bat",
                    "${workspaceFolder}/.vscode/set_compile_env.sh"
                ],
                "default": "${workspaceFolder}/.vscode/set_compile_env.bat"
            },
            {
                "id": "chooseEnv",
                "type": "pickString",
                "description": "Choose the compilation environment",
                "options": [
                    "cygwin",
                    "mingw",
                    "windows",
                    "linux"
                ],
                "default": "${env:default_env_name}"
            },
            {
                "id": "chooseShellExecutable",
                "type": "pickString",
                "description": "Choose the shell to execute the script",
                "options": [
                    "cmd.exe",
                    "C:/cygwin64/bin/bash.exe",
                    "C:/msys64/usr/bin/bash.exe"
                ],
                "default": "cmd.exe"
            },
            {
                "id": "chooseShellArgs",
                "type": "pickString",
                "description": "Shell arguments",
                "options": [
                    "/c",
                    "--login",
                    "-c"
                ],
                "default": "/c"
            }
        ]
    }